!function(t){let e=0,o=function(e){let o=t(this).attr("data-dialogId"),s=t(this),a=t(".myOwnDialog_overlay"+o),l=t(this).attr("data-dialogAutoClose");0===a.length&&(t("body").prepend('<div class="myOwnDialog_overlay'+o+'"></div>'),(a=t(".myOwnDialog_overlay"+o)).css({position:"fixed","background-color":"black",width:"100%",height:"100%",opacity:"0.5",left:"0",top:"0",right:"0",bottom:"0",display:"block"})),t(this).fadeIn(400,function(){"function"==typeof e.settings.afterOpenedCallback&&e.settings.afterOpenedCallback&&e.settings.afterOpenedCallback()}),"false"!==l&&(console.log("enter"),setTimeout(function(){console.log("timeout"),i.call(s,e)},l))},i=function(e){let o=t(this).attr("data-dialogId"),i=t(".myOwnDialog_overlay"+o),s=t(this);if(1===i.length){"function"==typeof e.settings.beforeCloseCallback?e.settings.beforeCloseCallback&&(e.settings.beforeCloseCallback(),t(".myOwnDialog_overlay"+o).css({display:"none"}),i.remove(),s.fadeOut("400",function(){"function"==typeof e.settings.afterClosedCallback&&e.settings.afterClosedCallback&&e.settings.afterClosedCallback()})):(s.fadeOut(),t(".myOwnDialog_overlay"+o).css({display:"none"}),i.remove()),console.log("found")}else console.log("not found"+i.length)},s={init:function(o){return this.each(function(i){e+=1;let s=t(window).width(),a=t(window).height(),l=t(this),n=t(this);if(!l.data("myOwnDialog")){let i={autoClose:!1,pos_x:"empty",pos_y:"empty",width:"300",height:"200",bg_color:"white",body_margin:"5",body_overflow_x:"hidden",body_overflow_y:"hidden",movable:!0,resizable:!0,title:"  ",touchOutsideForClose:!1,beforeOpenCallback:!1,afterOpenedCallback:!1,beforeCloseCallback:!1,afterClosedCallback:!1};o&&t.extend(!0,i,o),"empty"===i.pos_x&&(i.pos_x=(s-i.width)/2),"empty"===i.pos_y&&(i.pos_y=(a-i.height)/2);let p=n.html();n.html('<div class="mdl_box_body">'+p+"</div>"),n.prepend('<div class="titlebar noselect"><div class="titlebar_left"><div class="titlebar_title">'+i.title+'</div></div><div class="titlebar_right"><div class="close">&times;</div></div><div class="box_clear"></div></div>'),n.append('<div class="mdl_top"></div><div class="mdl_top_left"></div><div class="mdl_left"></div><div class="mdl_bottom_left"></div><div class="mdl_bottom"></div><div class="mdl_bottom_right"></div><div class="mdl_right"></div><div class="mdl_top_right"></div>'),n.attr("data-dialogId",e),n.attr("data-dialogResizable",i.resizable),n.attr("data-dialogMovable",i.movable),n.attr("data-dialogAutoClose",i.autoClose),n.attr("data-dialogTouchOutsideForClose",i.touchOutsideForClose),t(this).css({position:"fixed","z-index":"999",display:"none",width:i.width+"px",height:i.height+"px",left:i.pos_x+"px",top:i.pos_y+"px",background:i.bg_color}),t(this).find(".mdl_box_body").css({margin:i.body_margin+"px","overflow-x":i.body_overflow_x,"overflow-y":i.body_overflow_y}),t(this).addClass("noselect"),l.data("myOwnDialog",{target:l,settings:i});var d=t(this),r=l.data("myOwnDialog");(function(e){let o="rest",i=0,s=0,a=0,l=0,n=0,d=0,r=0,p=0,c=0,g=0,h=0,f=0,u=0,m=0,_=0,b=0,y=t(this).attr("data-dialogId"),v=t(this).attr("data-dialogResizable"),w=t(this).attr("data-dialogMovable"),C=t(this).attr("data-dialogTouchOutsideForClose"),x=t(this).find(".titlebar").outerHeight()+8,O=0,z=0,X=0,Y=0,k=t(this);function D(){let o=t(".myOwnDialog_overlay"+y);"function"==typeof e.settings.beforeCloseCallback?e.settings.beforeCloseCallback&&(e.settings.beforeCloseCallback(),t(".myOwnDialog_overlay"+y).css({display:"none"}),o.remove(),k.fadeOut("400",function(){"function"==typeof e.settings.afterClosedCallback&&e.settings.afterClosedCallback&&e.settings.afterClosedCallback()})):(k.fadeOut(),t(".myOwnDialog_overlay"+y).css({display:"none"}),o.remove())}"true"===C&&t(document).on("mouseup",function(t){"rest"!==o||k.is(t.target)||0!==k.has(t.target).length||D()}),t(this).find(".close").on("click",function(){D()}),"true"===w&&t(this).find(".titlebar_left").on("mousedown",function(t){"rest"===o&&(i=t.pageX,s=t.pageY,a=k.position().left,l=k.position().top,n=k.width(),d=k.height(),r=t.pageX-a,p=t.pageY-l),o="move"}),"true"===v&&(t(this).find(".mdl_bottom").on("mousedown",function(t){"rest"===o&&(i=t.pageX,s=t.pageY,a=k.position().left,l=k.position().top,n=k.width(),d=k.height(),r=t.pageX-a,p=t.pageY-l,g=(c=l+d)-s),o="bottom_resize"}),t(this).find(".mdl_right").on("mousedown",function(t){"rest"===o&&(i=t.pageX,s=t.pageY,a=k.position().left,l=k.position().top,n=k.width(),d=k.height(),r=t.pageX-a,p=t.pageY-l,f=(h=a+n)-i),o="right_resize"}),t(this).find(".mdl_bottom_right").on("mousedown",function(t){"rest"===o&&(i=t.pageX,s=t.pageY,a=k.position().left,l=k.position().top,n=k.width(),d=k.height(),r=t.pageX-a,p=t.pageY-l,g=(c=l+d)-s,f=(h=a+n)-i),o="bottom_right_resize"}),t(this).find(".mdl_top").on("mousedown",function(t){"rest"===o&&(i=t.pageX,s=t.pageY,a=k.position().left,l=k.position().top,n=k.width(),d=k.height(),r=t.pageX-a,p=t.pageY-l,u=p,m=l+d),o="top_resize"}),t(this).find(".mdl_left").on("mousedown",function(t){"rest"===o&&(i=t.pageX,s=t.pageY,a=k.position().left,l=k.position().top,n=k.width(),d=k.height(),r=t.pageX-a,p=t.pageY-l,_=r,b=a+n),o="left_resize"}),t(this).find(".mdl_top_left").on("mousedown",function(t){"rest"===o&&(i=t.pageX,s=t.pageY,a=k.position().left,l=k.position().top,n=k.width(),d=k.height(),r=t.pageX-a,p=t.pageY-l,_=r,b=a+n,u=p,m=l+d),o="top_left_resize"}),t(this).find(".mdl_top_right").on("mousedown",function(t){"rest"===o&&(i=t.pageX,s=t.pageY,a=k.position().left,l=k.position().top,n=k.width(),d=k.height(),r=t.pageX-a,p=t.pageY-l,f=(h=a+n)-i,u=p,m=l+d),o="top_right_resize"}),t(this).find(".mdl_bottom_left").on("mousedown",function(t){"rest"===o&&(i=t.pageX,s=t.pageY,a=k.position().left,l=k.position().top,n=k.width(),d=k.height(),r=t.pageX-a,p=t.pageY-l,g=(c=l+d)-s,_=r,b=a+n),o="bottom_left_resize"})),t(this).on("mouseup",function(){o="rest",t(document).css({cursor:"default"})}),t(document).on("mouseup",function(){o="rest",t(document).css({cursor:"default"})}),t(document).on("mousemove",function(e){"move"===o?(k.css({left:e.pageX-r+"px",top:e.pageY-p+"px"}),t(document).css({cursor:"move"})):"bottom_resize"===o?(z=e.pageY-l+g,O=z>x?z:x,k.css({height:O+"px"}),t(document).css({cursor:"s-resize"})):"right_resize"===o?(Y=e.pageX-a+f,X=Y>142?Y:142,k.css({width:X+"px"}),t(document).css({cursor:"e-resize"})):"bottom_right_resize"===o?(z=e.pageY-l+g,O=z>x?z:x,Y=e.pageX-a+f,X=Y>142?Y:142,k.css({width:X+"px",height:O+"px"}),t(document).css({cursor:"se-resize"})):"top_resize"===o?(z=m-(e.pageY-u),O=z>x?z:x,k.css({top:e.pageY-u+"px",height:z+"px"}),t(document).css({cursor:"n-resize"})):"left_resize"===o?(Y=b-(e.pageX-_),X=Y>142?Y:142,k.css({left:e.pageX-_+"px",width:X+"px"}),t(document).css({cursor:"w-resize"})):"top_left_resize"===o?(z=m-(e.pageY-u),O=z>x?z:x,Y=b-(e.pageX-_),X=Y>142?Y:142,k.css({left:e.pageX-_+"px",width:X+"px",top:e.pageY-u+"px",height:O+"px"}),t(document).css({cursor:"nw-resize"})):"top_right_resize"===o?(z=m-(e.pageY-u),O=z>x?z:x,Y=e.pageX-a+f,X=Y>142?Y:142,k.css({width:X+"px",top:e.pageY-u+"px",height:O+"px"}),t(document).css({cursor:"ne-resize"})):"bottom_left_resize"===o&&(z=e.pageY-l+g,O=z>x?z:x,Y=b-(e.pageX-_),X=Y>142?Y:142,k.css({left:e.pageX-_+"px",width:X+"px",height:O+"px"}),t(document).css({cursor:"sw-resize"}))})}).call(d,r)}})},open:function(){return this.each(function(e){var i=t(this),s=i.data("myOwnDialog");"function"==typeof s.settings.beforeOpenCallback?s.settings.beforeOpenCallback&&(s.settings.beforeOpenCallback(),o.call(i,s)):o.call(i,s)})},close:function(){return this.each(function(e){var o=t(this),s=o.data("myOwnDialog");i.call(o,s)})},destroy:function(){return this.each(function(e){var o=t(this);o.data("myOwnDialog");o.removeData()})}};t.fn.myOwnDialog=function(e){return s[e]?s[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist in jQuery.myOwnDialog"):s.init.apply(this,arguments)}}(jQuery);
